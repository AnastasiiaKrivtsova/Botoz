<!DOCTYPE html>
<html class="page" lang="ru">
  <head>
    <meta charset="UTF-8">
    <title>Botozz</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="css/style.min.css">
    <link rel="preload" href="fonts/Manrope-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="fonts/Manrope-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="fonts/Manrope-Light.woff2 " as="font" type="font/woff2" crossorigin="anonymous">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
  </head>
  <body class="container">
    <header class="header" data-name="header">
      <a class="header__logo-link" href="index.html" aria-current="page" data-name="header-logo">BOTOZZ
      </a>
    </header>
    <section class="form">
        <div class="form__inner">
          <div class="form__inner-wrapper">
            <h1 class="form__title">Адаптация и благополучие ваших сотрудников</h2>
            <p class="form__text">Оставьте заявку на&nbsp;создание корпоративного чат-бота.</p>
            <div class="form__wrapper" data-form-validate data-callback="base">
              <form method="post" action="https://echo.htmlacademy.ru/" id="tg">
                <div class="form__inner-wrapper">
                  <div class="form__inner-wrapper-grid">
                    <div class="custom-input form__input" data-validate-type="text" data-limitation="name" data-required="data-required">
                      <input type="text" name="name" placeholder="Имя" id="name-second-from" aria-label="Введите ваше имя."/>
                    </div>
                    <div class="custom-input form__input" data-validate-type="phone" data-on-input-validate="data-on-input-validate" data-required="data-required">
                      <input type="tel" name="phone" placeholder="Телефон" id="mobile-number-second-from" aria-label="Введите ваш телефон."/>
                    </div>
                  </div>
                  <div class="auto-resize-textarea form__textarea custom-input form__input" data-validate-type="text" data-limitation="name" data-required="data-required">
                    <textarea name="comment" rows="2" placeholder="Комментарий" aria-label="textarea"></textarea>
                  </div>
                  <div class="form__checkbox-wrapper">
                    <div class="custom-toggle custom-toggle--checkbox form__checkbox" data-validate-type="checkbox" data-message-base="">
                      <label>
                        <input type="checkbox" value="Согласие на звонок" name="call" tabindex="-1"/>
                        <span class="custom-toggle__icon form__toggle-icon" tabindex="0">
                        </span>
                        <span class="custom-toggle__label form__checkbox-label">Позвонить</span>
                      </label>
                    </div>
                    <div class="custom-toggle custom-toggle--checkbox form__checkbox" data-validate-type="checkbox" data-message-base="">
                      <label>
                        <input type="checkbox" value="Согласие на смс в Telegram" name="sms" tabindex="-1"/>
                        <span class="custom-toggle__icon form__toggle-icon" tabindex="0">
                        </span>
                        <span class="custom-toggle__label form__checkbox-label">Написать в Telegram</span>
                      </label>
                    </div>
                  </div>
                  <div id="success" class="alert alert-success mt-3" role="alert" style="display: none;">
                    <button class="alert__button-close" type="button" aria-label="Закрыть попап." data-close-modal="data-close-modal" data-focus="data-focus">
                      <img src="./img/svg/cross.svg" width="22" height="22" alt="Закрыть попап.">
                    </button>
                  </div>
                  <button class="form__button general-button general-button--dark" aria-label="Отправить форму обратной связи." type="submit">
                    <span>Оставить заявку</span>
                  </button>
                </div>
              </form>
            </div>
          </div>
          <div class="form__inner-img">
            <picture>
              <img src="./img/phone.png" srcset="./img/phone@2x.png"  width="616"
                height="686" alt="Фотография руки с телефоном.">
            </picture>
          </div>
        </div>
    </section>
    <footer class="footer"></footer>

    <section class="modal modal--preload" data-modal="modal-1">
      <div class="modal__wrapper masa-modal">
        <div class="modal__overlay" data-close-modal="data-close-modal"></div>
            <div class="masa-modal__container">
              <button class="masa-modal__button-close" type="button" aria-label="Закрыть попап." data-close-modal="data-close-modal" data-focus="data-focus">
                <img src="./img/svg/cross.svg" width="22" height="22" alt="Закрыть попап.">
              </button>
              <h3>Спасибо! Мы&nbsp;свяжемся с&nbsp;Вами в&nbsp;течение 30&nbsp;минут.</h3>
            </div>
      </div>
    </section>
    <script src="js/vendor.min.js" type="module"></script>
    <script src="js/main.min.js" type="module"></script>
    <script src="https://unpkg.com/axios@1.6.7/dist/axios.min.js"></script>
    <script>
      const TOKEN= "7115464809:AAHWDsT3Q2-FjpQZ-82zNjzKU-_IUvOBk-o";
      const CHAT_ID ="-1002052824112";
      const URL_API = `https://api.telegram.org/bot${ TOKEN}/sendMessage`;
      const success = document.getElementById('success');

      document.getElementById('tg').addEventListener('submit',function(e) {
        e.preventDefault();

        let message = `<b>Заявка с сайта!</b>\n`;
        message += `<b>Имя клиента:</b> ${ this.name.value }\n`
        message += `<b>Телефон клиента:</b> ${ this.phone.value }\n`
        message += `<b>Комментарий клиента:</b> ${ this.comment .value }\n`
        if (this.call.checked) {
          message += `<b>Просьба позвонить:</b> ${ this.call.value }\n`;
        }
        if (this.sms.checked) {
          message += `<b>Просьба написать в Telegram:</b> ${ this.sms.value }`;
        }

        axios.post(URL_API, {
          chat_id: CHAT_ID,
          parse_mode: 'html',
          text: message
        })
        .then((res) => {
          this.name.value = "";
          this.phone.value = "";
          this.comment.value = "";
          this.call.value = "";
          this.sms.value = "";
          success.innerHTML = "Спасибо! Мы свяжемся с Вами в течении 30 минут!";
          success.style.display = "block";
        })
        .catch((err) => {

        })
        .finally(() => {

        })
      });
    </script>
  </body>
</html>
